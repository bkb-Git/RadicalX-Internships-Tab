{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport viser from 'viser';\nfunction retain(obj, attr) {\n  var newObj = Object.create(null);\n  for (var item in obj) {\n    if (obj.hasOwnProperty(item)) {\n      var arrAttr = Array.isArray(attr) ? attr : [attr];\n      if (arrAttr.indexOf(item) >= 0) {\n        newObj[item] = obj[item];\n      }\n    }\n  }\n  return newObj;\n}\nvar LiteChart = function (_super) {\n  __extends(LiteChart, _super);\n  function LiteChart(props) {\n    var _this = _super.call(this, props) || this;\n    _this.config = {};\n    _this.displayName = '';\n    _this.portalRef = function (container) {\n      if (!_this.container) {\n        _this.container = container;\n      }\n    };\n    return _this;\n  }\n  LiteChart.prototype.combineChartConfig = function (props, config) {\n    var chartRetain = ['height', 'width', 'animate', 'forceFit', 'background', 'plotBackground', 'padding'];\n    config.chart = retain(props, chartRetain);\n    return config;\n  };\n  LiteChart.prototype.combineViewConfig = function (props, config) {\n    if (props.data) {\n      config.data = props.data;\n    }\n    if (props.dataPre) {\n      config.dataPre = props.dataPre;\n    }\n    if (props.scale) {\n      config.scale = props.scale;\n    }\n    if (props.guide) {\n      config.guide = props.guide;\n    }\n    config.tooltip = props.tooltip ? props.tooltip : true;\n    config.legend = props.legend ? props.legend : true;\n    config.axis = props.axis ? props.axis : true;\n    return config;\n  };\n  LiteChart.prototype.combineSeriesConfig = function (props, config) {\n    var regSeries = ['pie', 'sector', 'line', 'smoothLine', 'dashLine', 'area', 'stackArea', 'smoothArea', 'bar', 'stackBar', 'dodgeBar', 'interval', 'stackInterval', 'dodgeInterval', 'point', 'waterfall', 'funnel', 'pyramid', 'radialBar', 'schema', 'box', 'candle', 'polygon', 'contour', 'heatmap', 'edge', 'jitterPoint'];\n    for (var _i = 0, regSeries_1 = regSeries; _i < regSeries_1.length; _i++) {\n      var res = regSeries_1[_i];\n      if (props[res]) {\n        config.series = __assign({}, config.series, {\n          quickType: res\n        });\n        break;\n      }\n    }\n    return config;\n  };\n  LiteChart.prototype.createChartInstance = function (config) {\n    var elm = this.elm;\n    if (elm) {\n      ReactDOM.unmountComponentAtNode(elm);\n    }\n    if (this.chart) {\n      this.chart.destroy();\n    }\n    this.combineChartConfig(this.props, this.config);\n    this.combineViewConfig(this.props, this.config);\n    this.combineSeriesConfig(this.props, this.config);\n    var root = document.createElement('div');\n    this.container.appendChild(root);\n    config.chart.container = root;\n    this.elm = document.createElement('div');\n    this.chart = viser(config);\n  };\n  LiteChart.prototype.repaintChartInstance = function (config) {\n    this.combineChartConfig(this.props, this.config);\n    this.combineViewConfig(this.props, this.config);\n    this.combineSeriesConfig(this.props, this.config);\n    if (this.chart) {\n      this.chart.repaint(config);\n    } else {\n      config.chart.container = this.container;\n      this.chart = viser(config);\n    }\n  };\n  LiteChart.prototype.clearConfigData = function () {\n    this.config = {};\n  };\n  LiteChart.prototype.componentDidMount = function () {\n    this.createChartInstance(this.config);\n    this.clearConfigData();\n  };\n  LiteChart.prototype.componentDidUpdate = function () {\n    this.repaintChartInstance(this.config);\n    this.clearConfigData();\n  };\n  LiteChart.prototype.componentWillUnmount = function () {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = null;\n    }\n    this.elm = this.container = null;\n  };\n  LiteChart.prototype.render = function () {\n    return React.createElement(\"div\", {\n      ref: this.portalRef\n    }, this.props.children);\n  };\n  return LiteChart;\n}(React.Component);\nexport default LiteChart;","map":{"version":3,"mappings":"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","names":["React","ReactDOM","viser","retain","obj","attr","newObj","Object","create","item","hasOwnProperty","arrAttr","Array","isArray","indexOf","__extends","props","_super","_this","container","LiteChart","config","chartRetain","chart","data","dataPre","scale","guide","tooltip","legend","axis","regSeries","regSeries_1","_i","res","series","quickType","elm","unmountComponentAtNode","destroy","combineChartConfig","combineViewConfig","combineSeriesConfig","root","document","createElement","appendChild","repaint","createChartInstance","clearConfigData","repaintChartInstance","ref","portalRef","children","Component"],"sourceRoot":"","sources":["../../src/components/LiteChart.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}